(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?t(exports,require("react"),require("react-dom")):typeof define==="function"&&define.amd?define(["exports","react","react-dom"],t):(e=typeof globalThis!=="undefined"?globalThis:e||self,t(e.ReactFormutil={},e.React,e.ReactDOM))})(this,(function(e,t,r){"use strict";function n(e){return e&&typeof e==="object"&&"default"in e?e:{default:e}}var a=n(t);function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function i(e,t){return t={exports:{}},e(t,t.exports),t.exports}var u=i((function(e){function t(r){"@babel/helpers - typeof";return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=true,e.exports["default"]=e.exports,t(r)}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));o(u);var s=i((function(e){var t=u["default"];function r(e,r){if(t(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var a=n.call(e,r||"default");if(t(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}e.exports=r,e.exports.__esModule=true,e.exports["default"]=e.exports}));o(s);var f=i((function(e){var t=u["default"];function r(e){var r=s(e,"string");return t(r)==="symbol"?r:String(r)}e.exports=r,e.exports.__esModule=true,e.exports["default"]=e.exports}));o(f);var l=i((function(e){function t(e,t,r){t=f(t);if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));var c=o(l);var $=i((function(e){function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?t(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}e.exports=r,e.exports.__esModule=true,e.exports["default"]=e.exports}));var d=o($);var p=i((function(e){function t(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));o(p);var v=i((function(e){function t(e){if(Array.isArray(e))return p(e)}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));o(v);var h=i((function(e){function t(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));o(h);var m=i((function(e){function t(e,t){if(!e)return;if(typeof e==="string")return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));o(m);var y=i((function(e){function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));o(y);var g=i((function(e){function t(e){return v(e)||h(e)||m(e)||y()}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));var b=o(g);var x=i((function(e){function t(e){if(Array.isArray(e))return e}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));o(x);var w=i((function(e){function t(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,u=[],s=!0,f=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);s=!0);}catch(e){f=!0,a=e}finally{try{if(!s&&null!=r["return"]&&(i=r["return"](),Object(i)!==i))return}finally{if(f)throw a}}return u}}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));o(w);var _=i((function(e){function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));o(_);var S=i((function(e){function t(e,t){return x(e)||w(e,t)||m(e,t)||_()}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));var P=o(S);var C=i((function(e){function t(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));var F=o(C);var O=i((function(e){function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,f(n.key),n)}}function r(e,r,n){if(r)t(e.prototype,r);if(n)t(e,n);Object.defineProperty(e,"prototype",{writable:false});return e}e.exports=r,e.exports.__esModule=true,e.exports["default"]=e.exports}));var V=o(O);var k=i((function(e){function t(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));var E=o(k);var j=i((function(e){function t(r,n){e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,r){t.__proto__=r;return t},e.exports.__esModule=true,e.exports["default"]=e.exports;return t(r,n)}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));o(j);var M=i((function(e){function t(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});if(t)j(e,t)}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));var R=o(M);var A=i((function(e){function t(r){e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function e(t){return t.__proto__||Object.getPrototypeOf(t)},e.exports.__esModule=true,e.exports["default"]=e.exports;return t(r)}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));o(A);var D=i((function(e){function t(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));o(D);var N=i((function(e){var t=u["default"];function r(e,r){if(r&&(t(r)==="object"||typeof r==="function")){return r}else if(r!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return k(e)}e.exports=r,e.exports.__esModule=true,e.exports["default"]=e.exports}));o(N);var U=i((function(e){function t(e){var t=D();return function r(){var n=A(e),a;if(t){var o=A(this).constructor;a=Reflect.construct(n,arguments,o)}else{a=n.apply(this,arguments)}return N(this,a)}}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));var T=o(U);var I=function(){};var L=I;var H=t.createContext((function(){return{}}));var z=60103,B=60106,Q=60107,q=60108,G=60114,K=60109,Y=60110,W=60112,J=60113,X=60120,Z=60115,ee=60116,te=60121,re=60122,ne=60117,ae=60129,oe=60131;if("function"===typeof Symbol&&Symbol.for){var ie=Symbol.for;z=ie("react.element");B=ie("react.portal");Q=ie("react.fragment");q=ie("react.strict_mode");G=ie("react.profiler");K=ie("react.provider");Y=ie("react.context");W=ie("react.forward_ref");J=ie("react.suspense");X=ie("react.suspense_list");Z=ie("react.memo");ee=ie("react.lazy");te=ie("react.block");re=ie("react.server.block");ne=ie("react.fundamental");ae=ie("react.debug_trace_mode");oe=ie("react.legacy_hidden")}function ue(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case z:switch(e=e.type,e){case Q:case G:case q:case J:case X:return e;default:switch(e=e&&e.$$typeof,e){case Y:case W:case ee:case Z:case K:return e;default:return t}}case B:return t}}}var se=K,fe=z,le=W,ce=Q,$e=ee,de=Z,pe=B,ve=G,he=q,me=J;var ye=Y;var ge=se;var be=fe;var xe=le;var we=ce;var _e=$e;var Se=de;var Pe=pe;var Ce=ve;var Fe=he;var Oe=me;var Ve=function(){return!1};var ke=function(){return!1};var Ee=function(e){return ue(e)===Y};var je=function(e){return ue(e)===K};var Me=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===z};var Re=function(e){return ue(e)===W};var Ae=function(e){return ue(e)===Q};var De=function(e){return ue(e)===ee};var Ne=function(e){return ue(e)===Z};var Ue=function(e){return ue(e)===B};var Te=function(e){return ue(e)===G};var Ie=function(e){return ue(e)===q};var Le=function(e){return ue(e)===J};var He=function(e){return"string"===typeof e||"function"===typeof e||e===Q||e===G||e===ae||e===q||e===J||e===X||e===oe||"object"===typeof e&&null!==e&&(e.$$typeof===ee||e.$$typeof===Z||e.$$typeof===K||e.$$typeof===Y||e.$$typeof===W||e.$$typeof===ne||e.$$typeof===te||e[0]===re)?!0:!1};var ze=ue;var Be={ContextConsumer:ye,ContextProvider:ge,Element:be,ForwardRef:xe,Fragment:we,Lazy:_e,Memo:Se,Portal:Pe,Profiler:Ce,StrictMode:Fe,Suspense:Oe,isAsyncMode:Ve,isConcurrentMode:ke,isContextConsumer:Ee,isContextProvider:je,isElement:Me,isForwardRef:Re,isFragment:Ae,isLazy:De,isMemo:Ne,isPortal:Ue,isProfiler:Te,isStrictMode:Ie,isSuspense:Le,isValidElementType:He,typeOf:ze};var Qe=i((function(e){{e.exports=Be}}));var qe=Qe.isValidElementType;var Ge=Object.getPrototypeOf({});var Ke=/\s*(?:\]\s*\.|\]\s*\[|\.|\[|\])\s*/g;var Ye=typeof window==="undefined"?global:window;function We(e){return typeof e==="undefined"}function Je(e){return typeof e==="function"}function Xe(e){return We(e)||e===null||e+""===""}function Ze(e){return!!e&&Je(e.then)}function et(e){return Object.prototype.toString.call(e)==="[object Object]"}function tt(e){if(!et(e))return false;if(null===Object.getPrototypeOf(e))return true;if(!Je(e.constructor))return false;return e.constructor.prototype===Ge}function rt(e){return qe(e)&&typeof e!=="string"}function nt(e){if(Array.isArray(e)){var t=[];for(var r=0,n=e.length;r<n;r++){t[r]=nt(e[r])}return t}else if(tt(e)){var a={};for(var o in e){if(e.hasOwnProperty(o))a[o]=nt(e[o])}return a}return e}var at=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++){n[a-1]=arguments[a]}if(Je(t)){t.apply(void 0,n)}return n[0]};function ot(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}if(rt(r[0])){return e.apply(void 0,r)}return function(t){return e(t,r[0])}}}var it=["minlength","maxlength","max","min","required","pattern","step"];function ut(e){return it.indexOf(e.toLowerCase())>-1}var st=function e(t){try{var r=new Function("origin","global","return typeof ".concat(t," === 'number' || (typeof ").concat(t," !== 'undefined' && !(origin in global)) ? ").concat(t," : origin"));return r(t,Ye)}catch(e){return t}};function ft(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n=t[0],a=t[1],o=t[2];L(typeof a==="string","The second parameter(".concat(JSON.stringify(a),") of parsePath() must be a string."));var i=(a.match(Ke)||[]).map((function(e){return e.replace(/\s/g,"")}));var u=a.split(Ke).map((function(e){return e.trim()})).filter((function(e){return e!==""}));var s=n;try{if(t.length<3){for(var f=0,l=u.length;f<l;f++){var c=st(u[f]);if(f+1===l){return s[c]}if(We(s[c])){break}s=s[c]}}else{for(var $=0,p=u.length;$<p;$++){var v=st(u[$]);var h=u[$+1];var m=i[$];if(We(h)){s[v]=o;break}switch(m){case"].":case".":s=s[v]=We(s[v])?{}:d({},s[v]);break;case"][":case"[":var y=st(h);s=s[v]=We(s[v])?typeof y==="number"&&y>=0?[]:{}:Array.isArray(s[v])?b(s[v]):d({},s[v]);break;default:s[v]=o;break}}}}catch(e){}if(t.length>2){return n}}function lt(e,t){var r=t.split(Ke).map((function(e){return e.trim()})).filter((function(e){return e!==""}));for(var n=0,a=r.length;n<a;n++){var o=st(r[n]);if(!(o in e)){break}if(n+1===a){return{data:e[o]}}e=e[o]}}function ct(e,t){if(e){if(Je(e)){e(t)}else if("current"in e){e.current=t}}}var $t=function e(t,r){for(var n=0,a=t.length;n<a;n++){if(r(t[n])===true){return t[n]}}};var dt=function e(t,r){return Object.keys(t).reduce((function(e,n){e[n]=r(t[n],n,t);return e}),{})};var pt=function e(t,r){return Object.keys(t).forEach((function(e){return r(t[e],e,t)}))};var vt=undefined;function ht(e,t,r){pt(e,(function(t,r){if(t===vt){delete e[r]}else if(tt(t)||Array.isArray(t)){ht(t,r,e)}}));if(r&&Object.keys(e).every((function(t){return e[t]===vt}))){r[t]=vt;ht(r)}}var mt=function e(t,r){if(!We(ft(t,r))){ft(t,r,vt);ht(t)}};function yt(e,t){if(e===t){return true}var r=Object.keys(e);if(r.length!==Object.keys(t).length){return false}for(var n=0;n<r.length;n++){if(e[r[n]]!==t[r[n]]){return false}}return true}var gt="FORM_VALIDATE_RESULT";var bt,xt;if(typeof requestAnimationFrame==="function"){bt=requestAnimationFrame;xt=cancelAnimationFrame}else{bt=setTimeout;xt=clearTimeout}var wt=function(e){R(o,e);var n=T(o);function o(e){var t;F(this,o);t=n.call(this,e);t.$$formPending=void 0;t.$$formValidatePromise=void 0;t.$$registers={};t.$$deepRegisters={};t.getFormContext=function(){return{$$registers:t.$$registers,$$register:t.$$register,$$unregister:t.$$unregister,$$onChange:t.$$onChange,$$getDefault:t.$$getDefault,$formutil:t.$formutil}};t.$$regDuplications={};t.$$duplicateTimer=void 0;t.$$checkDuplication=function(){var e=E(t),r=e.$$regDuplications;var n;pt(r,(function(e,a){var o=P(e,2),i=o[0],u=o[1];L(i.$$reserved);u.$$reset(i.$getState());n=delete r[a];t.$$formShouldUpdateFields[a]=true}));if(n){t.$render()}};t.$$register=function(e,n,a){t.$$unregister(a,n);if(e){var o=t.$$getRegister(e);if(o){xt(t.$$duplicateTimer);t.$$regDuplications[e]=[o,n];t.$$duplicateTimer=bt((function(){return r.unstable_batchedUpdates(t.$$checkDuplication)}))}else{t.$$fieldChangedQueue.push({name:e,$newValue:n.$getState().$value});mt(t.$$defaultValues,e)}t.$$registers[n.$name=e]=n;t.$$formShouldUpdateFields[e]=true;t.createDeepRegisters();t.$render()}};t.$$unregister=function(e,r,n){if(e){if(n){r.$$reserved=true}else{if(e in t.$$regDuplications){var a=P(t.$$regDuplications[e],2),o=a[0],i=a[1];t.$$fieldChangedQueue.push({name:e,$newValue:i.$getState().$value,$prevValue:o.$getState().$value});delete t.$$regDuplications[e]}else if(t.$$registers[e]===r){delete t.$$registers[e];t.$$fieldChangedQueue.push({name:e,$prevValue:r.$getState().$value});mt(t.$$defaultValues,e)}}t.$$formShouldUpdateAll=true;t.createDeepRegisters();t.$render()}};t.$$defaultInitialize=function(){var e=t.props,r=e.$defaultValues,n=e.$defaultStates;t.$$defaultValues=t.$$deepParseObject(nt(Je(r)?r(t.props)||{}:r));t.$$defaultStates=t.$$deepParseObject(nt(Je(n)?n(t.props)||{}:n))};t.$$getDefault=function(){return{$$defaultStates:t.$$defaultStates,$$defaultValues:t.$$defaultValues}};t.$$formShouldUpdateFields={};t.$$formShouldUpdateAll=false;t.$$fieldChangedQueue=[];t.$$triggerFormChange=function(){if(t.$$fieldChangedQueue.length){var e=b(t.$$fieldChangedQueue);t.$$fieldChangedQueue.length=0;var r={};var n={};var a=t.$$registers;var o=false;e.forEach((function(e){if(!(e.name in a)){delete e.$newValue}if(e.$newValue!==e.$prevValue){if("$newValue"in e&&"$prevValue"in e){var i=t.$$getRegister(e.name);if(i){i.$$triggerChange(e)}}"$newValue"in e&&ft(r,e.name,e.$newValue);!e.$dirty&&"$prevValue"in e&&ft(n,e.name,e.$prevValue);o=true}}));if(o){if(Je(t.props.$validator)){t.$$formValidate()}if(Je(t.props.$onFormChange)){t.props.$onFormChange(t.$formutil,r,n)}}}};t.createDeepRegisters=function(){return t.$$deepRegisters=t.$$deepParseObject(t.$$registers)};t.$$getRegister=function(e){if(e){var r=t.$$registers[e]||ft(t.$$deepRegisters,e);if(r){return r}}};t.$$formValidate=function(){return t.$$formValidatePromise=new Promise((function(e){var r=t.props.$validator;var n;var a;var o;var i;var u=r(t.$formutil.$params,t.$formutil);var s=function t(r){return e(at(o,r))};if(Ze(u)){if(!t.$$formPending){t.$$formPending=true;t.$render()}a=function e(t){return n=t(s)};i=u.then((function(){return void 0}),(function(e){return e})).then((function(e){if(n){return n}t.$shouldCancelPrevAsyncValidate=null;t.$$formPending=false;return t.$$setFormErrors(e,s)}))}else{if(t.$$formPending){t.$$formPending=false}i=t.$$setFormErrors(u,s)}if(t.$shouldCancelPrevAsyncValidate){t.$shouldCancelPrevAsyncValidate((function(e){o=e;return i}))}t.$shouldCancelPrevAsyncValidate=a}))};t.$$setFormErrors=function(e,r){if(e&&(e instanceof Error||typeof e!=="object")){return t.$render(r)}return t.$$setStates(e||{},(function(e,t){var r=t.$getState(),n=r.$error,a=n===void 0?{}:n;if(e){return{$error:d(d({},a),{},c({},gt,e))}}if(a[gt]){delete a[gt];return{$error:a}}}),r,true)};t.$getField=function(e){var r=t.$$getRegister(e);if(r){var n;return(n=r.$new)===null||n===void 0?void 0:n.call(r)}};t.$$onChange=function(e,r,n){return t.$setStates(c({},e,r),n)};t.$$setStates=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=arguments.length>1?arguments[1]:undefined;var a=arguments.length>2?arguments[2]:undefined;var o=arguments.length>3?arguments[3]:undefined;var i=t.$$deepParseObject(e);var u=[];pt(t.$$registers,(function(e,r){var a=lt(i,r);if(o||a){var s=e.$getState();var f=n(a&&a.data,e);if(f){var l=e.$$merge(f),c=l.$value;u.push([e,f]);if("$value"in f||"$viewValue"in f){var $=$t(t.$$fieldChangedQueue,(function(e){return e.name===r}));if($){if(!("$prevValue"in $)){$.$dirty=true;$.$prevValue=$.$newValue}$.$newValue=c}else{t.$$fieldChangedQueue.push({name:r,$newValue:c,$prevValue:s.$value})}}t.$$formShouldUpdateFields[r]=true}}}));return r.unstable_batchedUpdates((function(){u.forEach((function(e){var t=P(e,2),r=t[0],n=t[1];return r.$$detectChange(n)}));return t.$render(a)}))};t.$render=function(e){return new Promise((function(r){return t.forceUpdate((function(){return r(at(e,t.$formutil))}))}))};t.$validates=function(){var e;for(var r=arguments.length,n=new Array(r),a=0;a<r;a++){n[a]=arguments[a]}if(Je(n[n.length-1])){e=n.pop()}if(n.length){var o=function e(r){r.forEach((function(r){if(Array.isArray(r)){e(r)}else{var n=t.$getField(r);if(n){n.$validate()}}}))};o(n)}else{pt(t.$$registers,(function(e){return e.$validate()}));if(Je(t.props.$validator)){t.$$formValidate()}}return t.$onValidates(e)};t.$onValidates=function(e){var r=Object.keys(t.$$registers).map((function(e){return t.$$registers[e].$onValidate()}));r.push(t.$$formValidatePromise);return Promise.all(r).then((function(){return at(e,t.$formutil)}))};t.$validate=function(e,r){var n=t.$getField(e);if(n){return n.$validate(r)}return at(r)};t.$reset=function(e,r){t.$$defaultInitialize();if(Je(e)){r=e;e={}}return t.$$setStates(e,(function(e,t){return t.$$reset(e)}),r,true)};t.$setStates=function(e,r){return t.$$setStates(e,(function(e){return e}),r)};t.$setValues=function(e,r){t.$$deepParseObject(nt(e),t.$$defaultValues);ht(t.$$defaultValues);return t.$$setStates(e,(function(e){return{$value:e}}),r)};t.$setFocuses=function(e,r){return t.$$setStates(e,(function(e){return{$focused:e}}),r)};t.$setDirts=function(e,r){return t.$$setStates(e,(function(e){return{$dirty:e}}),r)};t.$setTouches=function(e,r){return t.$$setStates(e,(function(e){return{$touched:e}}),r)};t.$setPendings=function(e,r){return t.$$setStates(e,(function(e){return{$pending:e}}),r)};t.$setErrors=function(e,r){return t.$$setStates(e,(function(e){return{$error:e}}),r)};t.$batchState=function(e,r){return t.$setStates(dt(t.$$registers,(function(){return e})),r)};t.$batchDirty=function(e,r){return t.$batchState({$dirty:e},r)};t.$batchTouched=function(e,r){return t.$batchState({$touched:e},r)};t.$batchFocused=function(e,r){return t.$batchState({$focused:e},r)};t.$batchPending=function(e,r){return t.$batchState({$pending:e},r)};t.$batchError=function(e,r){return t.$batchState({$error:e},r)};t.$getFirstError=function(e){var r=t.$formutil;if(e){var n=r.$getField(e);return n&&n.$getFirstError()}for(var a in r.$weakErrors){if(r.$weakErrors.hasOwnProperty(a)){var o=r.$weakErrors[a];for(var i in o){if(o.hasOwnProperty(i)){return o[i]instanceof Error?o[i].message:o[i]}}}}};t.$new=function(){return t.$formutil};t.$$defaultInitialize();return t}V(o,[{key:"$$deepParseObject",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};pt(t,(function(e,t){return ft(r,t,e)}));return r}},{key:"$$resetFormUpdateFields",value:function e(){this.$$formShouldUpdateFields={};this.$$formShouldUpdateAll=false}},{key:"componentDidMount",value:function e(){ct(this.props.$ref,this.$formutil)}},{key:"componentDidUpdate",value:function e(t){ct(this.props.$ref,this.$formutil);this.$$triggerFormChange()}},{key:"componentWillUnmount",value:function e(){ct(this.props.$ref,null)}},{key:"_render",value:function e(){var r=this.$formutil;var n=this.props,a=n.children,o=n.render,i=n.component;if(i){return t.createElement(i,{$formutil:r})}if(Je(o)){return o(r)}if(Je(a)){return a(r)}return t.Children.map(a,(function(e){return e&&rt(e.type)?t.cloneElement(e,{$formutil:r}):e}))}},{key:"render",value:function e(){var t=this;var r=this.props.$processer;var n=Object.keys(this.$$registers).map((function(e){return{path:e,$state:t.$$registers[e].$getState()}}));var o=this.$$formShouldUpdateAll;var i=this.$formutil||{};var u=n.some((function(e){var t=e.$state;return t.$invalid}));var s=n.some((function(e){var t=e.$state;return t.$dirty}));var f=n.some((function(e){var t=e.$state;return t.$touched}));var l=n.some((function(e){var t=e.$state;return t.$focused}));var c=this.$$formPending||n.some((function(e){var t=e.$state;return t.$pending}));var $=o?{}:d({},i.$pureParams);var p=o?{}:d({},i.$states);var v=o?{}:d({},i.$errors);var h=o?{}:d({},i.$dirts);var m=o?{}:d({},i.$touches);var y=o?{}:d({},i.$focuses);var g=o?{}:d({},i.$pendings);var b=o?{}:d({},i.$weakStates);var x=o?{}:d({},i.$weakParams);var w=o?{}:d({},i.$weakErrors);var _=o?{}:d({},i.$weakDirts);var S=o?{}:d({},i.$weakFocuses);var P=o?{}:d({},i.$weakTouches);var C=o?{}:d({},i.$weakPendings);for(var F=0,O=n.length;F<O;F++){var V=n[F],k=V.$state,E=V.path;if(!o){if(!this.$$formShouldUpdateFields[E]){continue}}if(r){r(k,E)}if(E in x&&k.$pristine&&We(k.$value)){delete x[E];mt($,E)}else if(x[E]!==k.$value){x[E]=k.$value;ft($,E,k.$value)}ft(p,E,k);b[E]=k;if(w[E]!==k.$error){if(k.$invalid){ft(v,E,k.$error);w[E]=k.$error}else if(E in w){mt(v,E);delete w[E]}}if(_[E]!==k.$dirty){ft(h,E,k.$dirty);_[E]=k.$dirty}if(P[E]!==k.$touched){ft(m,E,k.$touched);P[E]=k.$touched}if(S[E]!==k.$focused){ft(y,E,k.$focused);S[E]=k.$focused}if(C[E]!==k.$pending){ft(g,E,k.$pending);C[E]=k.$pending}}this.$formutil={$$registers:d({},this.$$registers),$$deepRegisters:this.$$deepRegisters,$states:p,$pureParams:$,$params:d(d({},this.$$defaultValues),$),$errors:v,$dirts:h,$touches:m,$focuses:y,$pendings:g,$weakStates:b,$weakParams:x,$weakErrors:w,$weakDirts:_,$weakTouches:P,$weakFocuses:S,$weakPendings:C,$getFirstError:this.$getFirstError,$render:this.$render,$getField:this.$getField,$onValidates:this.$onValidates,$new:this.$new,$setStates:this.$setStates,$setValues:this.$setValues,$setErrors:this.$setErrors,$setTouches:this.$setTouches,$setDirts:this.$setDirts,$setFocuses:this.$setFocuses,$setPendings:this.$setPendings,$batchState:this.$batchState,$batchTouched:this.$batchTouched,$batchDirty:this.$batchDirty,$batchFocused:this.$batchFocused,$batchPending:this.$batchPending,$reset:this.$reset,$validates:this.$validates,$validate:this.$validate,$valid:!u,$invalid:u,$dirty:s,$pristine:!s,$touched:f,$untouched:!f,$focused:l,$pending:c};this.$$resetFormUpdateFields();return a["default"].createElement(H.Provider,{value:this.getFormContext},this._render())}}]);return o}(t.Component);wt.displayName="React.Formutil.Form";wt.defaultProps={$defaultValues:{},$defaultStates:{}};var _t=i((function(e){function t(e,t){if(e==null)return{};var r={};var n=Object.keys(e);var a,o;for(o=0;o<n.length;o++){a=n[o];if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));o(_t);var St=i((function(e){function t(e,t){if(e==null)return{};var r=_t(e,t);var n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++){n=o[a];if(t.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;r[n]=e[n]}}return r}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));var Pt=o(St);var Ct="function"===typeof Symbol&&Symbol.for,Ft=Ct?Symbol.for("react.element"):60103,Ot=Ct?Symbol.for("react.portal"):60106,Vt=Ct?Symbol.for("react.fragment"):60107,kt=Ct?Symbol.for("react.strict_mode"):60108,Et=Ct?Symbol.for("react.profiler"):60114,jt=Ct?Symbol.for("react.provider"):60109,Mt=Ct?Symbol.for("react.context"):60110,Rt=Ct?Symbol.for("react.async_mode"):60111,At=Ct?Symbol.for("react.concurrent_mode"):60111,Dt=Ct?Symbol.for("react.forward_ref"):60112,Nt=Ct?Symbol.for("react.suspense"):60113,Ut=Ct?Symbol.for("react.suspense_list"):60120,Tt=Ct?Symbol.for("react.memo"):60115,It=Ct?Symbol.for("react.lazy"):60116,Lt=Ct?Symbol.for("react.block"):60121,Ht=Ct?Symbol.for("react.fundamental"):60117,zt=Ct?Symbol.for("react.responder"):60118,Bt=Ct?Symbol.for("react.scope"):60119;function Qt(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case Ft:switch(e=e.type,e){case Rt:case At:case Vt:case Et:case kt:case Nt:return e;default:switch(e=e&&e.$$typeof,e){case Mt:case Dt:case It:case Tt:case jt:return e;default:return t}}case Ot:return t}}}function qt(e){return Qt(e)===At}var Gt=Rt;var Kt=At;var Yt=Mt;var Wt=jt;var Jt=Ft;var Xt=Dt;var Zt=Vt;var er=It;var tr=Tt;var rr=Ot;var nr=Et;var ar=kt;var or=Nt;var ir=function(e){return qt(e)||Qt(e)===Rt};var ur=qt;var sr=function(e){return Qt(e)===Mt};var fr=function(e){return Qt(e)===jt};var lr=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===Ft};var cr=function(e){return Qt(e)===Dt};var $r=function(e){return Qt(e)===Vt};var dr=function(e){return Qt(e)===It};var pr=function(e){return Qt(e)===Tt};var vr=function(e){return Qt(e)===Ot};var hr=function(e){return Qt(e)===Et};var mr=function(e){return Qt(e)===kt};var yr=function(e){return Qt(e)===Nt};var gr=function(e){return"string"===typeof e||"function"===typeof e||e===Vt||e===At||e===Et||e===kt||e===Nt||e===Ut||"object"===typeof e&&null!==e&&(e.$$typeof===It||e.$$typeof===Tt||e.$$typeof===jt||e.$$typeof===Mt||e.$$typeof===Dt||e.$$typeof===Ht||e.$$typeof===zt||e.$$typeof===Bt||e.$$typeof===Lt)};var br=Qt;var xr={AsyncMode:Gt,ConcurrentMode:Kt,ContextConsumer:Yt,ContextProvider:Wt,Element:Jt,ForwardRef:Xt,Fragment:Zt,Lazy:er,Memo:tr,Portal:rr,Profiler:nr,StrictMode:ar,Suspense:or,isAsyncMode:ir,isConcurrentMode:ur,isContextConsumer:sr,isContextProvider:fr,isElement:lr,isForwardRef:cr,isFragment:$r,isLazy:dr,isMemo:pr,isPortal:vr,isProfiler:hr,isStrictMode:mr,isSuspense:yr,isValidElementType:gr,typeOf:br};var wr=i((function(e){{e.exports=xr}}));var _r={childContextTypes:true,contextType:true,contextTypes:true,defaultProps:true,displayName:true,getDefaultProps:true,getDerivedStateFromError:true,getDerivedStateFromProps:true,mixins:true,propTypes:true,type:true};var Sr={name:true,length:true,prototype:true,caller:true,callee:true,arguments:true,arity:true};var Pr={$$typeof:true,render:true,defaultProps:true,displayName:true,propTypes:true};var Cr={$$typeof:true,compare:true,defaultProps:true,displayName:true,propTypes:true,type:true};var Fr={};Fr[wr.ForwardRef]=Pr;Fr[wr.Memo]=Cr;function Or(e){if(wr.isMemo(e)){return Cr}return Fr[e["$$typeof"]]||_r}var Vr=Object.defineProperty;var kr=Object.getOwnPropertyNames;var Er=Object.getOwnPropertySymbols;var jr=Object.getOwnPropertyDescriptor;var Mr=Object.getPrototypeOf;var Rr=Object.prototype;function Ar(e,t,r){if(typeof t!=="string"){if(Rr){var n=Mr(t);if(n&&n!==Rr){Ar(e,n,r)}}var a=kr(t);if(Er){a=a.concat(Er(t))}var o=Or(e);var i=Or(t);for(var u=0;u<a.length;++u){var s=a[u];if(!Sr[s]&&!(r&&r[s])&&!(i&&i[s])&&!(o&&o[s])){var f=jr(t,s);try{Vr(e,s,f)}catch(e){}}}}return e}var Dr=Ar;var Nr=["__forwardRef__"],Ur=["component"];var Tr=["render","component","children","$defaultValues","$defaultStates","$onFormChange","$validator","$processer","$ref"];function Ir(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=function(t){R(o,t);var n=T(o);function o(){var t;F(this,o);for(var r=arguments.length,i=new Array(r),u=0;u<r;u++){i[u]=arguments[u]}t=n.call.apply(n,[this].concat(i));t.renderChildren=function(r){return a["default"].createElement(e,Object.assign({},t.othersProps,{$formutil:r,ref:t.props.__forwardRef__}))};return t}V(o,[{key:"render",value:function e(){var t=this.props,n=t.__forwardRef__,o=Pt(t,Nr);var i=this.props,u=i.component,s=Pt(i,Ur);Tr.forEach((function(e){if(e in o){if(e==="$defaultStates"||e==="$defaultValues"){s[e]=d(d({},r[e]),o[e])}delete o[e]}}));this.othersProps=o;return a["default"].createElement(wt,Object.assign({},r,s,{render:this.renderChildren}))}}]);return o}(t.Component);n.displayName="React.Formutil.withForm."+(e.displayName||e.name||"Anonymous");var o=t.forwardRef((function(e,t){return a["default"].createElement(n,Object.assign({__forwardRef__:t},e))}));o.displayName="React.Formutil.withForm.ForwardRef."+(e.displayName||e.name||"Anonymous");return Dr(o,e)}var Lr=ot(Ir);var Hr=typeof Element!=="undefined";var zr=typeof Map==="function";var Br=typeof Set==="function";var Qr=typeof ArrayBuffer==="function"&&!!ArrayBuffer.isView;function qr(e,t){if(e===t)return true;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return false;var r,n,a;if(Array.isArray(e)){r=e.length;if(r!=t.length)return false;for(n=r;n--!==0;)if(!qr(e[n],t[n]))return false;return true}var o;if(zr&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return false;o=e.entries();while(!(n=o.next()).done)if(!t.has(n.value[0]))return false;o=e.entries();while(!(n=o.next()).done)if(!qr(n.value[1],t.get(n.value[0])))return false;return true}if(Br&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return false;o=e.entries();while(!(n=o.next()).done)if(!t.has(n.value[0]))return false;return true}if(Qr&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){r=e.length;if(r!=t.length)return false;for(n=r;n--!==0;)if(e[n]!==t[n])return false;return true}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf==="function"&&typeof t.valueOf==="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString==="function"&&typeof t.toString==="function")return e.toString()===t.toString();a=Object.keys(e);r=a.length;if(r!==Object.keys(t).length)return false;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[n]))return false;if(Hr&&e instanceof Element)return false;for(n=r;n--!==0;){if((a[n]==="_owner"||a[n]==="__v"||a[n]==="__o")&&e.$$typeof){continue}if(!qr(e[a[n]],t[a[n]]))return false}return true}return e!==e&&t!==t}var Gr=function e(t,r){try{return qr(t,r)}catch(e){if((e.message||"").match(/stack|recursion/i)){console.warn("react-fast-compare cannot handle circular refs");return false}throw e}};var Kr=i((function(e){function t(e){if(e==null)throw new TypeError("Cannot destructure "+e)}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));var Yr=o(Kr);var Wr=0;var Jr={$valid:true,$invalid:false,$dirty:false,$pristine:true,$touched:false,$untouched:true,$focused:false,$pending:false,$error:{}};function Xr(e){return e!==true}function Zr(e,t,r){}var en="React.Formutil.Field";function tn(){return Wr++}function rn(e,r){var n=r.children,a=r.render,o=r.component;if(o){return t.createElement(o,{$fieldutil:e})}if(Je(a)){return a(e)}if(Je(n)){return n(e)}return t.Children.map(n,(function(r){return r&&rt(r.type)?t.cloneElement(r,{$fieldutil:e}):r}))}function nn(e,t){var r={$$FIELD_UUID:e.$$FIELD_UUID,$$reset:u,$$merge:b,$$detectChange:a,$$triggerChange:o,$onValidate:i,$new:function t(){return e.$fieldutil},$picker:s,$getState:s,$getComponent:function e(){return t},$reset:function t(r,n){return e.$setState(u(r),n)},$getFirstError:g,$validate:f,$setState:e.$setState,$render:l,$setValue:c,$setTouched:$,$setDirty:p,$setFocused:v,$setValidity:m,$setError:h,$setPending:y};var n;function a(e){if("$value"in e||"$viewValue"in e){f()}}function o(t){var r=t.$newValue,n=t.$prevValue;var a=e.props.$onFieldChange;if(Je(a)){a(r,n,e.$formContext.$formutil)}}function i(e){n.then(e);return n}function u(t){var r;var n=e.props,a=e.$formContext;if(a.$$getDefault){var o=n.name;var i=a.$$getDefault(),u=i.$$defaultStates,s=i.$$defaultValues;if(o&&s){var f=ft(s,o);r=ft(u,o)||{};if(!We(f)){r.$value=f}}}var l=n.$defaultValue,c=n.$defaultState;return b(d(d(d(d({},Jr),Je(c)?c(n):c),{},{$value:Je(l)?l(n):"$defaultValue"in n?l:""},r),t))}function s(){return d({},e.$state)}function f(t){return n=new Promise((function(r){var n=e.props,a=e.$formContext;var o=d(d({},n.$validators),n.$asyncValidators);var i=e.$state,u=i.$value,s=i.$pending,f=Object.assign({},(Yr(i.$error),i.$error));var l=a.$formutil;var c={};var $=false;var p;var v;var g;var b;delete f[gt];var x=Object.keys(o).reduce((function(t,r){delete f[r];if(!$&&n[r]!=null){var a=o[r](u,n[r],d(d({},n),{},{$formutil:l,$fieldutil:e.$fieldutil,$validError:c}));if(Ze(a)){t.push(a.catch((function(e){if(!p){m(r,e||r)}})))}else if(Xr(a)){c[r]=a||r;Zr(a,r,n.name);if(n.$validateLazy){$=true}}}return t}),[]);var w=function e(n){return r(at(t,at(g,n)))};if(x.length){if(!s){y(true)}v=function e(t){return p=t(w)};x.push(h(d(d({},f),c)));b=Promise.all(x).then((function(){if(p){return p}e.$shouldCancelPrevAsyncValidate=null;return y(false,w)}))}else{if(s){y(false)}b=h(d(d({},f),c),w)}if(e.$shouldCancelPrevAsyncValidate){e.$shouldCancelPrevAsyncValidate((function(e){g=e;return b}))}e.$shouldCancelPrevAsyncValidate=v}))}function l(t,r){return e.$setState({$viewValue:t,$dirty:true},r)}function c(t,r){return e.$setState({$value:t},r)}function $(t,r){return e.$setState({$touched:t},r)}function p(t,r){return e.$setState({$dirty:t},r)}function v(t,r){return e.$setState({$focused:t},r)}function h(t,r){return e.$setState({$error:t},r)}function m(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var n=arguments.length>2?arguments[2]:undefined;var a=Object.assign({},(Yr(e.$state.$error),e.$state.$error));if(Xr(r)){a[t]=r||t;Zr(r,t,e.props.name)}else{delete a[t]}return h(a,n)}function y(t,r){return e.$setState({$pending:t},r)}function g(){var t=e.$state.$error,r=t===void 0?{}:t;for(var n in r){if(r.hasOwnProperty(n)){return r[n]instanceof Error?r[n].message:r[n]}}}function b(t){var r=Object.assign({},(Yr(t),t));if("$error"in r){if(!r.$error){r.$error={}}r.$valid=Object.keys(r.$error).length===0}var n=e.props,a=n.$parser,o=n.$formatter;if("$viewValue"in r&&!("$value"in r)){var i=function e(t){return r.$viewValue=t};r.$value=a?a(r.$viewValue,i):r.$viewValue}else if("$value"in r&&!("$viewValue"in r)){var u=function e(t){return r.$value=t};r.$viewValue=o?o(r.$value,u):r.$value}if("$valid"in r){r.$invalid=!r.$valid}else if("$invalid"in r){r.$valid=!r.$invalid}if("$dirty"in r){r.$pristine=!r.$dirty}else if("$pristine"in r){r.$dirty=!r.$pristine}if("$touched"in r){r.$untouched=!r.$touched}else if("$untouched"in r){r.$touched=!r.$untouched}e.$state=d(d({},e.$state),r);return s()}return r}var an=function(e){R(r,e);var t=T(r);function r(){var e;F(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++){a[o]=arguments[o]}e=t.call.apply(t,[this].concat(a));e.$$FIELD_UUID=tn();e.$formContext=void 0;e.$state=void 0;e.shouldRendered=false;e.$setState=function(t,r){return new Promise((function(n){var a=function t(){return n(at(r,e.$fieldutil))};if(e.isMounting){var o=e.props.name;if(o in(e.$formContext.$$registers||{})){e.shouldRendered=false;e.$formContext.$$onChange(o,t,a);if(!e.shouldRendered){e.forceUpdate()}}else{e.$registered.$$merge(t);e.$registered.$$detectChange(t);e.forceUpdate(a)}}else{e.$registered.$$merge(t);a()}}))};return e}V(r,[{key:"componentDidMount",value:function e(){this.isMounting=true;var t=this.props.name,r=this.$formContext;L(!t||r.$formutil);if(r.$$register){r.$$register(t,this.$fieldHandler)}this.$prevState=this.$state;ct(this.props.$ref,this.$fieldutil)}},{key:"componentWillUnmount",value:function e(){if(this.$formContext.$$unregister){this.$formContext.$$unregister(this.props.name,this.$fieldHandler,this.props.$reserveOnUnmount)}this.isMounting=false;ct(this.props.$ref,null)}},{key:"componentDidUpdate",value:function e(t){var r=this.props.name;if(r!==t.name){if(this.$formContext.$$register){this.$formContext.$$register(r,this.$fieldHandler,t.name)}}ct(this.props.$ref,this.$fieldutil);if(this.$state.$value!==this.$prevState.$value){if(!(r in(this.$formContext.$$registers||{}))){this.$registered.$$triggerChange({$newValue:this.$state.$value,$prevValue:this.$prevState.$value})}}this.$prevState=this.$state}},{key:"shouldComponentUpdate",value:function e(t){var r=t.$memo;return!r||!yt(this.$registered.$getState(),this.$prevState)||!(Array.isArray(r)?Gr(r,this.props.$memo):Gr(this.props,t))}},{key:"_render",value:function e(){var t=this.$fieldutil=d(d(d({$name:this.props.name},this.$registered.$getState()),this.$registered),{},{$$formutil:this.$formContext.$formutil});return rn(t,this.props)}},{key:"render",value:function e(){var t=this;this.shouldRendered=true;return a["default"].createElement(H.Consumer,null,(function(e){var r=!t.$formContext;t.$formContext=e();if(!t.$fieldHandler){t.$fieldHandler=nn(t,t)}t.$registered=(t.$formContext.$$registers||{})[t.$fieldHandler.$name]||t.$fieldHandler;if(r){t.$fieldHandler.$$reset();t.$fieldHandler.$validate()}return t._render()}))}}]);return r}(t.Component);an.displayName=en;var on=["__forwardRef__"],un=["component"];var sn=["name","$defaultValue","$defaultState","$onFieldChange","$validators","$asyncValidators","$validateLazy","$memo","$reserveOnUnmount","$ref","$parser","$formatter","render","component","children"];function fn(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=function(t){R(o,t);var n=T(o);function o(){var t;F(this,o);for(var r=arguments.length,i=new Array(r),u=0;u<r;u++){i[u]=arguments[u]}t=n.call.apply(n,[this].concat(i));t.renderChildren=function(r){return a["default"].createElement(e,Object.assign({},t.othersProps,{$fieldutil:r,ref:t.props.__forwardRef__}))};return t}V(o,[{key:"render",value:function e(){var t=this.props,n=t.__forwardRef__,o=Pt(t,on);var i=this.props,u=i.component,s=Pt(i,un);sn.concat(Object.keys(d(d(d(d({},r.$validators),r.$asyncValidators),o.$validators),o.$asyncValidators))).forEach((function(e){if(e in o){if(e==="$validators"||e==="$asyncValidators"||e==="$defaultState"){s[e]=d(d({},r[e]),o[e])}delete o[e]}}));this.othersProps=o;return a["default"].createElement(an,Object.assign({},r,s,{render:this.renderChildren}))}}]);return o}(t.Component);n.displayName="React.Formutil.withField."+(e.displayName||e.name||"Anonymous");var o=t.forwardRef((function(e,t){return a["default"].createElement(n,Object.assign({__forwardRef__:t},e))}));o.displayName="React.Formutil.withField.ForwardRef."+(e.displayName||e.name||"Anonymous");return Dr(o,e)}var ln=ot(fn);var cn=["$fieldutil","value","onChange","onFocus","onBlur","checked","unchecked"];var $n=function(e){R(r,e);var t=T(r);function r(){F(this,r);return t.apply(this,arguments)}V(r,[{key:"render",value:function e(){var t=this;var r=this.props,n=r.$fieldutil,o=r.value,i=r.onChange,u=r.onFocus,s=r.onBlur,f=r.checked,l=r.unchecked,c=Pt(r,cn);var $=this.props.type;var d={value:"compositionValue"in this?this.compositionValue:o,onCompositionEnd:function e(r){t.isComposing=false;delete t.compositionValue;d.onChange(r)},onCompositionStart:function e(){return t.isComposing=true},onChange:function e(r){var n=r.target.value;if(t.isComposing){t.compositionValue=n;t.forceUpdate()}else{i(n,r)}},onFocus:u,onBlur:function e(r){if(t.isComposing){t.isComposing=false;delete t.compositionValue;d.onChange(r)}return s(r)}};var p="input";switch($){case"select":p=$;d.onChange=function(e){var t=e.target;var r=t.multiple?[].slice.call(t.options).filter((function(e){return e.selected})).map((function(e){return e.value})):t.value;i(r,e)};delete c.type;break;case"textarea":p=$;delete c.type;break;case"checkbox":case"radio":d={checked:o===f,onChange:function e(t){i(t.target.checked?f:l,t)},onFocus:u,onBlur:s};break}return a["default"].createElement(p,Object.assign({},c,d))}}]);return r}(t.Component);$n.displayName="React.Formutil.EasyField.Native";$n.defaultProps={value:"",type:"text",checked:true,unchecked:false};var dn=["$value","onChange","onFocus","onBlur"];var pn=t.createContext((function(){return{}})),vn=pn.Provider,hn=pn.Consumer;var mn=function(e){R(n,e);var r=T(n);function n(){var e;F(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++){a[o]=arguments[o]}e=r.call.apply(r,[this].concat(a));e.getGroupContext=function(){return e.props};return e}V(n,[{key:"_render",value:function e(){var r=this.props,n=r.className,o=r.groupNode,i=r.children;var u={GroupOption:yn,Field:gn};var s=Je(i)?i(u):t.Children.map(i,(function(e){return t.cloneElement(e,u)}));if(o===null){return s}return a["default"].createElement(o,{className:n},s)}},{key:"render",value:function e(){return a["default"].createElement(vn,{value:this.getGroupContext},this._render())}}]);return n}(t.Component);mn.displayName="React.Formutil.EasyField.Group";mn.defaultProps={type:"checkbox",groupNode:"div"};var yn=function(e){R(r,e);var t=T(r);function r(){F(this,r);return t.apply(this,arguments)}V(r,[{key:"componentDidMount",value:function e(){L("$value"in this.props)}},{key:"render",value:function e(){var t=this.props,r=t.$value,n=t.onChange,o=t.onFocus,i=t.onBlur,u=Pt(t,dn);return a["default"].createElement(hn,null,(function(e){var t=e();var s=t.type,f=t.name;var l=s==="radio"?{checked:t.value===r,onChange:function e(a){t.onChange(r,a);n&&n(a)}}:s==="checkbox"?{checked:t.value.indexOf(r)>-1,onChange:function e(a){t.onChange(a.target.checked?t.value.concat(r):t.value.filter((function(e){return e!==r})),a);n&&n(a)}}:{value:t.value,onChange:function e(r){t.onChange(r);n&&n(r)}};return a["default"].createElement("input",Object.assign({name:f},u,l,{type:s,onFocus:function e(r){t.onFocus(r);o&&o(r)},onBlur:function e(r){t.onBlur(r);i&&i(r)}}))}))}}]);return r}(t.Component);yn.displayName="React.Formutil.EasyField.Group.Option";var gn=function(e){R(r,e);var t=T(r);function r(){F(this,r);return t.apply(this,arguments)}V(r,[{key:"componentDidMount",value:function e(){}},{key:"render",value:function e(){return a["default"].createElement(yn,this.props)}}]);return r}(t.Component);gn.displayName="React.Formutil.EasyField.Group.Option.Deprecated";var bn=a["default"].Frament||"div";var xn=function(e){R(r,e);var t=T(r);function r(e){var n;F(this,r);n=t.call(this,e);n.id=0;n.latestValue=n.props.value;n.$formutil=void 0;n.FieldValidators={required:function e(t){return t!==null}};n.$onFormChange=function(e){e.$onValidates((function(e){var t=e.$invalid,r=e.$params;if(t){if(n.props.value.length){n.props.onChange(n.latestValue=[])}}else if(!Gr(n.props.value,r.list)){n.props.onChange(n.latestValue=r.list)}}))};n.swap=function(e,t,r){return n.$setState((function(r){var n=r.items;var a=[n[e],n[t]];n[t]=a[0];n[e]=a[1];return n}),r)};n.insert=function(){var e,t,r;for(var a=arguments.length,o=new Array(a),i=0;i<a;i++){o[i]=arguments[i]}o.forEach((function(n){if(Je(n)){r=n}else if(typeof n==="number"){e=n}else if(typeof n==="object"){t=n}}));return n.$setState((function(r){var a=r.items;if(We(e)){a.push(n.getId(t))}else{a.splice(e,0,n.getId(t))}return{items:a}}),r)};n.remove=function(){var e,t;for(var r=arguments.length,a=new Array(r),o=0;o<r;o++){a[o]=arguments[o]}a.forEach((function(r){if(Je(r)){t=r}else if(typeof r==="number"){e=r}}));return n.$setState((function(t){var r=t.items;if(We(e)){r.pop()}else{r.splice(e,1)}if(!r.length){r=[n.getId()]}return{items:r}}),t)};n.$setState=function(e,t){return new Promise((function(r){return n.setState(e,(function(){return n.$formutil.$onValidates((function(e){return r(at(t,e))}))}))}))};n.state={items:e.value.length?e.value.map((function(){return n.getId()})):[n.getId()],formKey:0};return n}V(r,[{key:"componentDidUpdate",value:function e(t){var r=this;if(this.props.value!==this.latestValue){this.setState({items:this.props.value.length?this.props.value.map((function(){return r.getId()})):[this.getId()],formKey:this.state.formKey+1});this.latestValue=this.props.value}}},{key:"getId",value:function e(t){return{id:this.id++,values:t}}},{key:"render",value:function e(){var t=this;var r=this.props,n=r.children,o=r.onFocus,i=r.onBlur,u=r.value;var s=this;if(!Je(n)){return null}var f={$insert:this.insert,$remove:this.remove,$swap:this.swap,$push:function e(r,n){return t.insert(r,n)},$pop:function e(r){return t.remove(r)},$shift:function e(r){return t.remove(0,r)},$unshift:function e(r,n){return t.insert(0,r,n)},onFocus:o,onBlur:i};return a["default"].createElement(wt,{key:this.state.formKey,$defaultValues:{list:u},$onFormChange:this.$onFormChange,children:function e(r){t.$formutil=r;return a["default"].createElement(bn,null,t.state.items.map((function(e,o){var i=e.id,u=e.values;return a["default"].createElement(an,{key:i,required:true,$defaultValue:u||null,$validators:t.FieldValidators,name:"list[".concat(o,"]"),children:function e(i){return a["default"].createElement(wt,{$defaultValues:i.$value||{},$onFormChange:function e(t){return t.$onValidates((function(e){var t=e.$invalid,r=e.$params;if(!Gr(i.$viewValue,r)){i.$setState({$viewValue:r,$value:t?null:r})}}))},children:function e(a){return n(d(d({get $length(){return s.state.items.length},$index:o,$isLast:function e(){return o===t.state.items.length-1},$isFirst:function e(){return o===0}},f),a),r)}})}})})))}})}}]);return r}(t.Component);xn.displayName="React.Formutil.EasyField.List";var wn=["children","component","render"],_n=["name","type","defaultValue","valuePropName","changePropName","focusPropName","blurPropName","getValueFromEvent","validMessage","checked","unchecked","__TYPE__","__DIFF__","passUtil","$defaultValue","$defaultState","$onFieldChange","$validators","$asyncValidators","$validateLazy","$memo","$reserveOnUnmount","$parser","$formatter","$ref"];var Sn="__TYPE__";var Pn=[["required",function(e,t,r){var n=r.__TYPE__,a=r.checked,o=a===void 0?true:a;return t===false||(n==="checked"?e===o:!Xe(e))}],["maxLength",function(e,t){return Xe(e)||e.length<=t*1}],["minLength",function(e,t){return Xe(e)||e.length>=t*1}],["max",function(e,t){return Xe(e)||e*1<=t*1}],["min",function(e,t){return Xe(e)||e*1>=t*1}],["pattern",function(e,t){return Xe(e)||t.test(e)}],["enum",function(e,t){return Xe(e)||t.indexOf(e)>-1}],["checker",function(e,t,r){return t(e,r)}]].reduce((function(e,t){var r=P(t,2),n=r[0],a=r[1];e[n]=function e(t,r,o){var i=o.validMessage,u=i===void 0?{}:i;return a.apply(void 0,arguments)||u[n]||"Error input: ".concat(n)};return e}),{});var Cn="React.Formutil.EasyField";var Fn={validMessage:{},valuePropName:"value",changePropName:"onChange",focusPropName:"onFocus",blurPropName:"onBlur",$parser:function e(t){return typeof t==="string"?t.trim():t}};function On(e,t,r){var n;var a=t.valuePropName,o=t.changePropName,i=t.focusPropName,u=t.blurPropName,s=t.getValueFromEvent,f=t.passUtil;var l=function e(t){return t&&t.target?t.target[a]:t};var $=d(d({},r),{},(n={},c(n,a,e.$viewValue),c(n,o,(function(r){var n;for(var a=arguments.length,i=new Array(a>1?a-1:0),u=1;u<a;u++){i[u-1]=arguments[u]}if(((n=i[0])===null||n===void 0?void 0:n.nativeEvent)instanceof Event){i.push(r)}else{i.unshift(r)}var f=t[o];f&&f.apply(void 0,i);var c=s?s.apply(void 0,i):l(r);e.$render(c)})),c(n,i,(function(){var r=t[i];r&&r.apply(void 0,arguments);e.$setFocused(true)})),c(n,u,(function(){var r=t[u];r&&r.apply(void 0,arguments);if(e.$untouched){e.$setTouched(true)}e.$setFocused(false)})),n));if(f){$[f===true?"$fieldutil":String(f)]=e}return $}function Vn(e){var t=e.children,r=e.component,n=e.render,a=Pt(e,wn);var o=a.name,i=a.type,u=a.defaultValue,s=a.valuePropName,f=a.changePropName,l=a.focusPropName,c=a.blurPropName,$=a.getValueFromEvent,p=a.validMessage,v=a.checked,h=a.unchecked,m=a.__TYPE__,y=a.__DIFF__,g=a.passUtil,b=a.$defaultValue,x=a.$defaultState,w=a.$onFieldChange,_=a.$validators,S=a.$asyncValidators,C=a.$validateLazy,F=a.$memo,O=a.$reserveOnUnmount,V=a.$parser,k=a.$formatter,E=a.$ref,j=Pt(a,_n);var M={children:t,component:r,render:n};if(F===true&&We(y)){a.__DIFF__=[t,r,n]}var R=!We(i)||We(t)&&We(r)&&We(n);Object.keys(d(d({},a.$validators=d(d({},Pn),a.$validators)),a.$asyncValidators)).forEach((function(e){if(e in j){if(!R||!ut(e)){delete j[e]}}}));if(R){var A=(i||"").split("."),D=P(A,2),N=D[0],U=N===void 0?"text":N,T=D[1];M.component=U==="group"?mn:U==="list"?xn:$n;if(o){j.name=o}if(i){j.type=U}if(t){j.children=t}j.checked=v;j.unchecked=h;switch(U){case"select":case"textarea":if(e.multiple){a[Sn]="array"}break;case"group":if(T==="checkbox"){a[Sn]="array"}j.type=T;break;case"checkbox":case"radio":a[Sn]="checked";break;case"list":a[Sn]="array";break}}if(!("$defaultValue"in a)&&"defaultValue"in e){a.$defaultValue=u}if(!("$defaultValue"in a)&&Sn in a){var I;switch(a[Sn]){case"checked":var L=a.unchecked,H=L===void 0?false:L;I=H;break;case"array":I=[];break;case"object":I={};break;case"number":I=0;break}a.$defaultValue=I}return{fieldProps:a,childProps:j,renderProps:M}}function kn(e,r){var n=r.component,a=r.render,o=r.children;if(n){return t.createElement(n,e)}if(Je(a)){return a(e)}if(Je(o)){return o(e)}return t.Children.map(o,(function(r){return t.cloneElement(r,e)}))}var En=function(e){R(r,e);var t=T(r);function r(){var e;F(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++){a[o]=arguments[o]}e=t.call.apply(t,[this].concat(a));e.renderChildren=function(t){var r=e.parsedProps,n=r.fieldProps,a=r.childProps,o=r.renderProps;return kn(On(t,n,a),o)};e.parsedProps={};return e}V(r,[{key:"render",value:function e(){var t=this.parsedProps=Vn(this.props),r=t.fieldProps;return a["default"].createElement(an,Object.assign({},r,{children:this.renderChildren}))}}]);return r}(t.Component);En.displayName=Cn;En.defaultProps=Fn;function jn(e){var r=t.forwardRef((function(t,r){return a["default"].createElement(H.Consumer,null,(function(n){return a["default"].createElement(e,Object.assign({},t,{$formutil:n().$formutil,ref:r}))}))}));r.displayName="React.Formutil.connect."+(e.displayName||e.name||"Anonymous");return Dr(r,e)}function Mn(){if(!a["default"].useState){throw new Error("Hooks api need react@>=16.8, Please upgrade your reactjs.")}var e=a["default"].useContext;var t=e(H);return t()}function Rn(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!a["default"].useState){throw new Error("Hooks api need react@>=16.8, Please upgrade your reactjs.")}var r=a["default"].useState,n=a["default"].useLayoutEffect,o=a["default"].useEffect,i=a["default"].useRef;var u=typeof window==="undefined"?o:n;var s;if(e){if(typeof e==="string"){s=e;t.name=s}else{t=e;s=t.name}}var f=Mn();var l=i({}).current;var c=i([]);var $;l.$formContext=f;l.props=t;l.$setState=m;l.shouldRendered=true;var p=r((function(){l.$$FIELD_UUID=tn();l.$fieldHandler=$=nn(l);l.$fieldHandler.$$reset();l.$fieldHandler.$validate()})),v=P(p,2),h=v[1];if(!$){$=(f.$$registers||{})[l.$fieldHandler.$name]||l.$fieldHandler}u((function(){var e=l.$state;if(l.isMounting){if(!(s in(f.$$registers||{}))){$.$$triggerChange({$newValue:e.$value,$prevValue:l.$prevState.$value})}}l.$prevState=e}),[l.$state.$value]);u((function(){l.isMounting=true;L(!s||f.$formutil);return function(){l.isMounting=false;ct(t.$ref,null)}}),[]);u((function(){if(f.$$register){f.$$register(s,l.$fieldHandler)}return function(){if(f.$$unregister){f.$$unregister(s,l.$fieldHandler,!l.isMounting&&t.$reserveOnUnmount)}}}),[s]);u((function(){ct(t.$ref,l.$fieldutil)}));u((function(){if(c.current.length>0){var e=b(c.current);c.current.length=0;while(e.length){e.pop()(l.$fieldutil)}}}));function m(e,t){return new Promise((function(r){var n=function e(){return r(at(t,l.$fieldutil))};if(l.isMounting){if(s in(f.$$registers||{})){l.shouldRendered=false;f.$$onChange(s,e,n);if(!l.shouldRendered){h({})}}else{$.$$merge(e);$.$$detectChange(e);h({});c.current.push(n)}}else{$.$$merge(e);n()}}))}return l.$fieldutil=d(d(d({$name:s},$.$getState()),$),{},{$$formutil:f.$formutil})}function An(){var e=Mn(),t=e.$formutil;return t}function Dn(e){e=d(d(d({},Fn),e),{},{children:null});var t=Vn(e),r=t.fieldProps,n=t.childProps;var a=Rn(r);return On(a,r,n)}e.EasyField=En;e.Field=an;e.Form=wt;e.connect=jn;e.formContext=H;e.useField=Rn;e.useForm=An;e.useHandler=Dn;e.withField=ln;e.withForm=Lr;Object.defineProperty(e,"__esModule",{value:true})}));
